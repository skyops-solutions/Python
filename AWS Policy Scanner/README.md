# üîê IAM Policy Scanner & Optimizer

> –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó AWS IAM –ø–æ–ª—ñ—Ç–∏–∫ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –¥–µ–º–æ-—Ä–µ–∂–∏–º—É, –æ—Ñ–ª–∞–π–Ω-–ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ —Ä–µ–∞–ª—å–Ω–∏–º AWS-–∞–∫–∞—É–Ω—Ç–æ–º.

---

## üöÄ –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

### 1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

```bash
pip install boto3 click rich pyyaml tabulate colorama python-dateutil requests
```

---

### 2. –®–≤–∏–¥–∫–∏–π —Ç–µ—Å—Ç –±–µ–∑ AWS

```bash
# –î–µ–º–æ —Ä–µ–∂–∏–º ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π
python run.py demo

# –ù–∞–≤—á–∞–ª—å–Ω—ñ best practices
python run.py best-practices
```

---

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ–∞–π–ª –ø–æ–ª—ñ—Ç–∏–∫–∏

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤—É IAM –ø–æ–ª—ñ—Ç–∏–∫—É
echo '{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Action":"*","Resource":"*"}]}' > bad_policy.json

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ó—ó
python run.py check-policy bad_policy.json
```

---

### 4. –°–ø—Ä–∞–≤–∂–Ω—î AWS —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è

```bash
# –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ AWS CLI
aws configure

# –°–∫–∞–Ω—É–≤–∞—Ç–∏ –≤—Å—ñ IAM –ø–æ–ª—ñ—Ç–∏–∫–∏
python run.py scan

# –°–∫–∞–Ω—É–≤–∞—Ç–∏ –∑ —Ñ—ñ–ª—å—Ç—Ä–æ–º –∑–∞ —Ä—ñ–≤–Ω–µ–º —Ä–∏–∑–∏–∫—É
python run.py scan --severity HIGH --output report.json

# –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –ø–æ–ª—ñ—Ç–∏–∫–∏ –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ 30 –¥–Ω—ñ–≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
python run.py optimize --days 30
```

---

## üéØ –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

| –ö–æ–º–∞–Ω–¥–∞           | –û–ø–∏—Å                                                                 |
|-------------------|----------------------------------------------------------------------|
| `demo`            | –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –∑ —Ç–µ—Å—Ç–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏                                      |
| `scan`            | –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è AWS IAM –ø–æ–ª—ñ—Ç–∏–∫                                           |
| `optimize`        | –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø–æ–ª—ñ—Ç–∏–∫ –∑–∞ –ø—Ä–∏–Ω—Ü–∏–ø–æ–º least privilege                     |
| `analyze`         | –ê–Ω–∞–ª—ñ–∑ –æ–∫—Ä–µ–º–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–±–æ —Ä–æ–ª—ñ                                 |
| `check-policy`    | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–ª—ñ—Ç–∏–∫–∏ –∑ JSON-—Ñ–∞–π–ª—É                                      |
| `best-practices`  | –ü–µ—Ä–µ–ª—ñ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π –∑ –±–µ–∑–ø–µ–∫–∏                                       |

---

## üí° –©–æ —Ä–æ–±–∏—Ç—å —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

üî¥ **HIGH SEVERITY**
- –ü–æ–≤–Ω–∏–π admin –¥–æ—Å—Ç—É–ø (`"Action": "*"` + `"Resource": "*"`).
- Wildcard-—Ä–µ—Å—É—Ä—Å–∏ –±–µ–∑ –æ–±–º–µ–∂–µ–Ω—å.
- –ö—Ä–∏—Ç–∏—á–Ω—ñ –¥—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `iam:*`, `sts:*`) –±–µ–∑ MFA.

üü° **MEDIUM SEVERITY**
- –®–∏—Ä–æ–∫—ñ –¥–æ–∑–≤–æ–ª–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `s3:*`).
- –î—ñ—ó –±–µ–∑ —É–º–æ–≤ –¥–æ—Å—Ç—É–ø—É.
- –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å security-—É–º–æ–≤ (`Condition`, `MFA`).

üîµ **LOW SEVERITY**
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó: —É—Å—É–Ω–µ–Ω–Ω—è –∑–∞–π–≤–∏—Ö –¥—ñ–π, –∑–º–µ–Ω—à–µ–Ω–Ω—è –æ–±—Å—è–≥—ñ–≤.
- –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ best practices.

---

## ‚ú® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- ‚úÖ **–ü—Ä–∞—Ü—é—î –±–µ–∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ AWS** ‚Äî –æ—Ñ–ª–∞–π–Ω –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ JSON-–ø–æ–ª—ñ—Ç–∏–∫.
- üß™ **–î–µ–º–æ —Ä–µ–∂–∏–º** ‚Äî –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π —ñ —Ç—Ä–µ–Ω—É–≤–∞–Ω—å.
- üìò **Best practices** ‚Äî –Ω–∞–≤—á–∞–ª—å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ —Ç–∞ –ø–æ—Ä–∞–¥–∏.
- üé® **Rich Console UI** ‚Äî –∫–æ–ª—å–æ—Ä–æ–≤–∏–π, —Ñ–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥.
- üì§ **JSON-–µ–∫—Å–ø–æ—Ä—Ç** ‚Äî –¥–ª—è –∑–≤—ñ—Ç—ñ–≤ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ —ñ–Ω—à–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.

---

## üõ†Ô∏è –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

- Python ‚â• 3.8
- `boto3`, `click`, `rich`, `pyyaml`, `tabulate`, `colorama`, `python-dateutil`, `requests`

---

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License ‚Äî –≤—ñ–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç–∞ –º–æ–¥–∏—Ñ—ñ–∫—É–π—Ç–µ.
